(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{23:function(e,t,n){e.exports=n(33)},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),c=n.n(o),i=n(8),l=n(11),s={HOMEPAGE:"/",MOVIES:"/movies",MOVIE_DETAILS:"/movies/:movieId",CAST:"/movies/:movieId/cast"},u=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.c,{to:s.HOMEPAGE},"Home")),r.a.createElement("li",null,r.a.createElement(i.c,{to:s.MOVIES},"Movies")))},h=n(3),p=n(4),m=n(6),f=n(5),v=n(7),E="82381b1c79d0ad4bdb831ff891103a01",b={fetchAPITopMovies:function(){return fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=".concat(E)).then((function(e){return e.json()})).then((function(e){return e.results}))},fetchAPIMovieDetails:function(e){return fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(E)).then((function(e){return e.json()}))},fetchAPIMovieCast:function(e){return fetch("https://api.themoviedb.org/3/movie/".concat(e,"/credits?api_key=").concat(E)).then((function(e){return e.json()}))},fetchAPIMovies:function(e){return fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(E,"&query=").concat(e)).then((function(e){return e.json()})).then((function(e){return e.results}))},fetchAPIMovieReviews:function(e){return fetch("https://api.themoviedb.org/3/movie/".concat(e,"/reviews?api_key=").concat(E)).then((function(e){return e.json()})).then((function(e){return e.results}))}},O=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={topMovies:"",movies:[],error:null},n.fetchTopMovies=function(){b.fetchAPITopMovies().then((function(e){console.log(e),n.setState({movies:e})})).catch((function(e){n.setState({error:e})}))},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchTopMovies()}},{key:"render",value:function(){var e=this,t=this.state.movies;return r.a.createElement("div",null,r.a.createElement("h1",null,"Trending today"),r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(i.b,{to:{pathname:"/movies/".concat(t.id),state:{from:e.props.location}}},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(t.poster_path),alt:"poster"}),t.title))}))))}}]),t}(a.Component),d=n(22),y=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={input:""},n.onSubmit=function(e){e.preventDefault(),n.props.onSearch(n.state.input),n.setState({input:""})},n.onChange=function(e){n.setState({input:e.target.value})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",value:this.state.input,onChange:this.onChange}),r.a.createElement("button",{type:"submit"},"Search"))}}]),t}(a.Component);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var j=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={movies:[]},n.searchParamsQuery=function(e){return new URLSearchParams(e.location.search).get("query")},n.fetchMovies=function(e){return b.fetchAPIMovies(e).then((function(e){return n.setState({movies:e})}))},n.onSearch=function(e){n.props.history.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.props.location,{search:"query=".concat(e)}))},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.searchParamsQuery(this.props);e&&this.fetchMovies(e)}},{key:"componentDidUpdate",value:function(e,t){var n=this.searchParamsQuery(e),a=this.searchParamsQuery(this.props);n!==a&&this.fetchMovies(a)}},{key:"render",value:function(){var e=this,t=this.props.match,n=this.state.movies;return r.a.createElement("div",null,r.a.createElement(y,{onSearch:this.onSearch}),r.a.createElement("ul",null,n.map((function(n){return r.a.createElement("li",{key:n.id},r.a.createElement(i.b,{to:{pathname:"".concat(t.url,"/").concat(n.id),state:{from:e.props.location}}},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(n.poster_path),alt:"poster"}),n.title))}))))}}]),t}(a.Component),M=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={cast:[],error:null},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovieCast()}},{key:"fetchMovieCast",value:function(){var e=this,t=this.props.location.state.id;b.fetchAPIMovieCast(t).then((function(t){return e.setState({cast:t.cast})})).catch((function(t){return e.setState({error:t})}))}},{key:"render",value:function(){var e=this.state.cast;return r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",null,e.profile_path&&r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(e.profile_path),alt:"profile"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"Character: ",e.character))})))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={reviews:[]},n.fetchMovieReviews=function(){var e=n.props.location.state.id;b.fetchAPIMovieReviews(e).then((function(e){return n.setState({reviews:e})}))},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovieReviews()}},{key:"render",value:function(){var e=this.state.reviews;return r.a.createElement(r.a.Fragment,null,0===e.length&&r.a.createElement("p",null,"We don`t have any reviews for this movie."),0!==e.length&&r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("p",null,"Author: ",e.author),r.a.createElement("p",null,e.content))}))))}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={movie:null,error:null},n.fetchMovieDetails=function(){var e=n.props.match.params.movieId;b.fetchAPIMovieDetails(e).then((function(e){return n.setState({movie:e})})).catch((function(e){n.setState({error:e})}))},n.handleBackButton=function(){var e=n.props,t=e.location,a=e.history;t.state&&t.state.from?a.push(t.state.from):a.push(s.MOVIES)},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovieDetails()}},{key:"render",value:function(){var e=this.state.movie,t=this.props.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleBackButton},"Back to movies"),e&&r.a.createElement("div",null,r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w400".concat(e.poster_path),alt:"poster"}),r.a.createElement("h2",null,e.title," (",e.release_date.slice(0,4),")"),r.a.createElement("p",null,"User score: ",10*e.vote_average,"%"),r.a.createElement("h3",null,"Overview"),r.a.createElement("p",null,e.overview),r.a.createElement("h3",null,"Genres"),r.a.createElement("ul",null,e.genres.map((function(e){return r.a.createElement("li",null,e.name)}))),r.a.createElement("h3",null,"Additional information"),r.a.createElement(i.b,{to:{pathname:"".concat(t.url,"/cast"),state:{id:e.id,from:this.props.location.state.from}}},"Cast"),r.a.createElement("p",null),r.a.createElement(i.b,{to:{pathname:"".concat(t.url,"/reviews"),state:{id:e.id,from:this.props.location.state.from}}},"Reviews"),r.a.createElement(l.b,{path:"".concat(t.path,"/cast"),component:M}),r.a.createElement(l.b,{path:"".concat(t.path,"/reviews"),component:w})))}}]),t}(a.Component),S=function(){return r.a.createElement(i.a,null,r.a.createElement(u,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:s.HOMEPAGE,component:O}),r.a.createElement(l.b,{path:s.MOVIE_DETAILS,component:k}),r.a.createElement(l.b,{path:s.MOVIES,component:j}),r.a.createElement(l.a,{to:s.HOMEPAGE})))};c.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ef4d48aa.chunk.js.map